-- create  database my_db;

use my_db; 

select * from Users;
select * from Token; 
select * from Follow; 

create table Users(
	idx int auto_increment primary key,
    id varchar(20) not null unique,
    pw varchar(100) not null,
    email varchar(100) not null,
    pf_img varchar(100),
    pf_name varchar(50),
    pf_introduction varchar(300),
    reg_date datetime not null default now(),
    mod_date datetime not null default now() on update now()
);

create table Token(
	idx int auto_increment primary key,
    id varchar(20) not null unique,
    refresh_token text not null,
    reg_date datetime not null default now(),
    mod_date datetime not null default now() on update now()
);

create table Follow(
	idx int auto_increment primary key,
    follower_idx int not null,
    followee_idx int not null,
    reg_data datetime not null default now(),
    foreign key (follower_idx) references Users(idx) on delete cascade on update cascade,
    foreign key (followee_idx) references Users(idx) on delete cascade on update cascade
);

